var M=Object.defineProperty;var L=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var V=(r,o,l)=>o in r?M(r,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[o]=l,$=(r,o)=>{for(var l in o||(o={}))W.call(o,l)&&V(r,l,o[l]);if(L)for(var l of L(o))q.call(o,l)&&V(r,l,o[l]);return r};var m=(r,o,l)=>new Promise((_,w)=>{var C=n=>{try{f(l.next(n))}catch(d){w(d)}},S=n=>{try{f(l.throw(n))}catch(d){w(d)}},f=n=>n.done?_(n.value):Promise.resolve(n.value).then(C,S);f((l=l.apply(r,o)).next())});import{e as G,f as K,h as Q,i as X,j as Y}from"./issue-CAO84TTy.js";import{u as Z,_ as ee}from"./Table.vue_vue_type_script_lang-DvOqtju8.js";import{d as te,t as g}from"./index-DY4Ks39X.js";import{_ as ae}from"./Search.vue_vue_type_script_setup_true_lang-Dp5jFa9Y.js";import{_ as le}from"./ContentWrap.vue_vue_type_script_setup_true_lang-R-yJIw7t.js";import{_ as se}from"./Write.vue_vue_type_script_setup_true_lang-B76c0LeI.js";import{_ as oe}from"./Dialog.vue_vue_type_style_index_0_lang-zBp3wG0q.js";import{u as ie}from"./dict-BebjR_rx.js";import{s as ne}from"./dict-DJyIMlYA.js";import{z as re,m as ue,g as ce}from"./element-plus-D9n4Ar5m.js";import{l as de,a as u,J as O,O as s,P as h,V as v,m as pe,p as me,R as c,u as t,B as E,W as T}from"./vue-chunks-DM5Q6aJS.js";import"./useForm-B2dmd6BN.js";import"./style.css_vue_type_style_index_0_src_true_lang-nZXfjKm1.js";import"./wang-editor-CLgHiBvf.js";import"./_Uint8Array-DKqHwQen.js";import"./useIcon-Ca7c3xG3.js";import"./useValidator-B6tBWFkI.js";import"./dict-DpEfB3FK.js";const $e=de({name:"HelpIssueCategory",__name:"IssueCategory",setup(r){const{t:o}=te(),{tableRegister:l,tableState:_,tableMethods:w}=Z({fetchDataApi:()=>m(this,null,function*(){const{pageSize:a,currentPage:e}=_,i=yield K($({page:t(e),limit:t(a)},t(I)));return{list:i.data||[],total:i.count||0}}),fetchDelApi:a=>m(this,null,function*(){return(yield Q(a)).code===200})}),{dataList:C,loading:S,total:f,pageSize:n,currentPage:d}=_,{getList:y,delList:B}=w,D=u([]);m(this,null,function*(){const e=yield ie().getDictObj(["sys_vadmin_platform"]);D.value=e.sys_vadmin_platform});const F=O([{field:"id",label:"编号",show:!0,disabled:!0},{field:"name",label:"类别名称",show:!0,disabled:!0},{field:"platform",label:"展示平台",show:!0,slots:{default:a=>{const e=a.row;return s(h,null,[s("div",null,[ne(D.value,e.platform)])])}}},{field:"is_active",label:"是否可见",show:!0,slots:{default:a=>{const e=a.row;return s(h,null,[s(re,{modelValue:e.is_active,disabled:!0},null)])}}},{field:"create_datetime",label:"创建时间",show:!0,sortable:!0},{field:"create_user.name",label:"创建人",show:!0},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:a=>{const e=a.row;return s(h,null,[s(g,{type:"primary",link:!0,size:"small",onClick:()=>N(e)},{default:()=>[v("编辑")]}),s(g,{type:"danger",loading:R.value,link:!0,size:"small",onClick:()=>j(e)},{default:()=>[v("删除")]})])}}}]),U=O([{field:"name",label:"类别名称",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"platform",label:"登录平台",component:"Select",componentProps:{style:{width:"214px"},options:[]}},{field:"is_active",label:"是否可见",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"可见",value:!0},{label:"不可见",value:!1}]}}]),I=u({}),P=a=>{d.value=1,I.value=a,y()},R=u(!1),j=a=>m(this,null,function*(){R.value=!0,yield B(!0,[a.id]).finally(()=>{R.value=!1})}),p=u(!1),k=u(""),x=u(),b=u(""),z=u(),A=u(!1),N=a=>m(this,null,function*(){const e=yield G(a.id);e&&(k.value="编辑常见问题类别",b.value="edit",x.value=e.data,p.value=!0)}),H=()=>{k.value="新增常见问题类别",b.value="add",x.value=void 0,p.value=!0},J=()=>m(this,null,function*(){const a=t(z),e=yield a==null?void 0:a.submit();if(e){A.value=!0;try{const i=u({});b.value==="add"?(i.value=yield X(e),i.value&&(p.value=!1,y())):b.value==="edit"&&(i.value=yield Y(e),i.value&&(p.value=!1,y()))}finally{A.value=!1}}});return(a,e)=>(pe(),me(h,null,[s(t(le),null,{default:c(()=>[s(t(ae),{schema:U,onReset:P,onSearch:P},null,8,["schema"]),s(t(ee),{"current-page":t(d),"onUpdate:currentPage":e[0]||(e[0]=i=>E(d)?d.value=i:null),"page-size":t(n),"onUpdate:pageSize":e[1]||(e[1]=i=>E(n)?n.value=i:null),showAction:"",columns:F,"default-expand-all":"","node-key":"id",data:t(C),loading:t(S),pagination:{total:t(f)},onRegister:t(l),onRefresh:t(y)},{toolbar:c(()=>[s(t(ue),{gutter:10},{default:c(()=>[s(t(ce),{span:1.5},{default:c(()=>[s(t(g),{type:"primary",onClick:H},{default:c(()=>[v("新增常见问题类别")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),s(t(oe),{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=i=>p.value=i),title:k.value,height:650},{footer:c(()=>[s(t(g),{type:"primary",loading:A.value,onClick:J},{default:c(()=>[v(T(t(o)("exampleDemo.save")),1)]),_:1},8,["loading"]),s(t(g),{onClick:e[2]||(e[2]=i=>p.value=!1)},{default:c(()=>[v(T(t(o)("dialogDemo.close")),1)]),_:1})]),default:c(()=>[s(se,{ref_key:"writeRef",ref:z,"current-row":x.value},null,8,["current-row"])]),_:1},8,["modelValue","title"])],64))}});export{$e as default};
//# sourceMappingURL=IssueCategory-Bf5zfRby.js.map
